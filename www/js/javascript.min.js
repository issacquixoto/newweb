$(document).ready(function(){function a(){var a="left",b=parseInt(e("#player1",a));0>=b?$("#player1").css(a,b+"px"):$("#player1").css(a,b-m+"px")}function b(){var a="top",b=parseInt(e("#player1",a));0>=b?$("#player1").css(a,b+"px"):$("#player1").css(a,b-m+"px")}function c(){var a="left",b=$("#gbody").width()-10,c=parseInt(e("#player1",a));c>=b?$("#player1").css(a,c+"px"):$("#player1").css(a,c+m+"px")}function d(){var a="top",b=$("#gbody").height()-10,c=parseInt(e("#player1",a));c>=b?$("#player1").css(a,c+"px"):$("#player1").css(a,c+m+"px")}function e(a,b){var c=$(a).css(b),d=/\d+/,e=c.match(d)[0];return e}function f(){$("#My-bullet >div").each(function(){var a=parseInt(e(this,"top")),b=parseInt(e(this,"left")),c=a+parseInt($(this).attr("top")),d=b+parseInt($(this).attr("left"));10>=a||a>=600?$(this).remove():10>=b||b>=790?$(this).remove():$(this).css({top:c+"px",left:d+"px"})}),$("#enemy-bullet >div").each(function(){var a=parseInt(e(this,"top")),b=parseInt(e(this,"left")),c=a+parseInt($(this).attr("top")),d=b+parseInt($(this).attr("left"));10>=a||a>=600?$(this).remove():10>=b||b>=790?$(this).remove():$(this).css({top:c+"px",left:d+"px"})})}function g(a){var b={t:parseInt(e(a,"top")),h:parseInt(e(a,"top"))+parseInt(e(a,"height")),l:parseInt(e(a,"left")),w:parseInt(e(a,"left"))+parseInt(e(a,"width"))};return b}function h(a,b){var c=g(b),d=g(a);d.t>=c.t&&d.t<=c.h?i(a,b,c,d):d.h>=c.t&&d.h<=c.h&&i(a,b,c,d)}function i(a,b,c,d){d.l>=c.l&&d.l<=c.w?j(a,b):d.w>=c.l&&d.w<=c.w&&j(a,b)}function j(a,b){a.remove();var c=b.attr("hp");c>1?b.attr("hp",c-1):b.remove(),5>c&&b.css("background","red")}function k(a,b,c,d,e){if(a.hasClass("hover")){var f=c.css("left"),g=c.css("top"),h=b+90,i=b+180,j=b-90,k=(Math.sin(b*Math.PI/180)*e).toFixed(8),l=(-Math.cos(b*Math.PI/180)*e).toFixed(8),m=(Math.sin(h*Math.PI/180)*e).toFixed(8),n=(-Math.cos(h*Math.PI/180)*e).toFixed(8),o=(Math.sin(i*Math.PI/180)*e).toFixed(8),p=(-Math.cos(i*Math.PI/180)*e).toFixed(8),q=(Math.sin(j*Math.PI/180)*e).toFixed(8),r=(-Math.cos(j*Math.PI/180)*e).toFixed(8),s="<div class='bullet' style='left:"+f+";top:"+g+"' top='"+l+"' left='"+k+"'></div>",t="<div class='bullet' style='left:"+f+";top:"+g+"' top='"+n+"' left='"+m+"'></div>",u="<div class='bullet' style='left:"+f+";top:"+g+"' top='"+p+"' left='"+o+"'></div>",v="<div class='bullet' style='left:"+f+";top:"+g+"' top='"+r+"' left='"+q+"'></div>";d.append(s),d.append(t),d.append(u),d.append(v)}}var l=0,m=15;$(document).keydown(function(a){switch(a.keyCode){case 37:$("#key .left").addClass("hover");break;case 38:$("#key .up").addClass("hover");break;case 39:$("#key .right").addClass("hover");break;case 40:$("#key .down").addClass("hover");break;case 90:$("#key .keyz").addClass("hover");break;case 88:$("#key .keyx").addClass("hover")}}),$(document).keyup(function(a){switch(a.keyCode){case 37:$("#key .left").removeClass("hover");break;case 38:$("#key .up").removeClass("hover");break;case 39:$("#key .right").removeClass("hover");break;case 40:$("#key .down").removeClass("hover");break;case 90:$("#key .keyz").removeClass("hover");break;case 88:$("#key .keyx").removeClass("hover")}}),setInterval(function(){$("#key .left").hasClass("hover")&&a(),$("#key .up").hasClass("hover")&&b(),$("#key .right").hasClass("hover")&&c(),$("#key .down").hasClass("hover")&&d(),f();var e=$("#player1"),g=$("#enemy .brick");$("#enemy-bullet >div").each(function(){var a=$(this);h(a,e)}),$("#My-bullet >div").each(function(){var a=$(this);h(a,g)})},100),setInterval(function(){l+=25;var a=$("#key .keyz"),b=$("#enemy .brick"),c=$("#enemy-bullet"),d=15;k(a,l,b,c,d)},100),$(document).keypress(function(){$("#keydown").text($("#player1").css("top")),$("#keyup").text($("#player1").css("left"))}),$(document).keyup(function(){})});