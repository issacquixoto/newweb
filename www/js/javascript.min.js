$(document).ready(function(){function e(){r={body:3,sta:3,int:3,feel:3,will:3}}function t(){var e=0;$.each(r,function(t,a){e+=a}),s=n[o]-e,$("#overRacePoint").text(s)}function a(){$.each(r,function(e,t){$("."+e+"Point .point").html(t)})}var s,o,r={body:3,sta:3,int:3,feel:3,will:3},n={a1:26,a2:26,b1:24,b2:24,b3:24,b4:24,c1:22,c2:22,c3:22,c4:22,d1:20,d2:20};$("#characterRace").on("change",function(){e(),o=$(characterRace).find("option:selected").val(),$("#racePoint").text(n[o]),t(),a()}),$('#characterPoint input[value="+"]').on("click",function(){var e=$(this).attr("class");s<=0?$(".error_04").css("display","block"):(void 0===o&&(o="a1"),r[e]<6?(++r[e],t(),a(),$(".error_01").css("display","none")):$("."+e+"Point .error_02").css("display","inline-block"))}),$('#characterPoint input[value="-"]').on("click",function(){var e=$(this).attr("class");$(".error_04").css("display","none"),void 0===o&&(o="a1"),r[e]>3?(--r[e],t(),a(),$(".error_02").css("display","none")):$("."+e+"Point .error_01").css("display","inline-block")})}),$(document).ready(function(){function e(){var e=parseInt(o("#player1","left"));e<=0?$("#player1").css("left",e+"px"):$("#player1").css("left",e-d+"px")}function t(){var e=parseInt(o("#player1","top"));e<=0?$("#player1").css("top",e+"px"):$("#player1").css("top",e-d+"px")}function a(){var e=$("#gbody").width()-10,t=parseInt(o("#player1","left"));t>=e?$("#player1").css("left",t+"px"):$("#player1").css("left",t+d+"px")}function s(){var e=$("#gbody").height()-10,t=parseInt(o("#player1","top"));t>=e?$("#player1").css("top",t+"px"):$("#player1").css("top",t+d+"px")}function o(e,t){var a=/\d+/;return $(e).css(t).match(a)[0]}function r(){$("#My-bullet >div").each(function(){var e=parseInt(o(this,"top")),t=parseInt(o(this,"left")),a=e+parseInt($(this).attr("top")),s=t+parseInt($(this).attr("left"));e<=10||e>=600?$(this).remove():t<=10||t>=790?$(this).remove():$(this).css({top:a+"px",left:s+"px"})}),$("#enemy-bullet >div").each(function(){var e=parseInt(o(this,"top")),t=parseInt(o(this,"left")),a=e+parseInt($(this).attr("top")),s=t+parseInt($(this).attr("left"));e<=10||e>=600?$(this).remove():t<=10||t>=790?$(this).remove():$(this).css({top:a+"px",left:s+"px"})})}function n(e){return{t:parseInt(o(e,"top")),h:parseInt(o(e,"top"))+parseInt(o(e,"height")),l:parseInt(o(e,"left")),w:parseInt(o(e,"left"))+parseInt(o(e,"width"))}}function c(e,t){var a=n(t),s=n(e);s.t>=a.t&&s.t<=a.h?l(e,t,a,s):s.h>=a.t&&s.h<=a.h&&l(e,t,a,s)}function l(e,t,a,s){s.l>=a.l&&s.l<=a.w?i(e,t):s.w>=a.l&&s.w<=a.w&&i(e,t)}function i(e,t){e.remove();var a=t.attr("hp");a>1?t.attr("hp",a-1):t.remove(),a<5&&t.css("background","red")}function p(e,t,a,s,o){if(e.hasClass("hover")){var r=a.css("left"),n=a.css("top"),c=t+90,l=t+180,i=t-90,p=(Math.sin(t*Math.PI/180)*o).toFixed(8),h=(-Math.cos(t*Math.PI/180)*o).toFixed(8),$=(Math.sin(c*Math.PI/180)*o).toFixed(8),d=(-Math.cos(c*Math.PI/180)*o).toFixed(8),y=(Math.sin(l*Math.PI/180)*o).toFixed(8),v=(-Math.cos(l*Math.PI/180)*o).toFixed(8),f=(Math.sin(i*Math.PI/180)*o).toFixed(8),u="<div class='bullet' style='left:"+r+";top:"+n+"' top='"+h+"' left='"+p+"'></div>",k="<div class='bullet' style='left:"+r+";top:"+n+"' top='"+d+"' left='"+$+"'></div>",b="<div class='bullet' style='left:"+r+";top:"+n+"' top='"+v+"' left='"+y+"'></div>",I="<div class='bullet' style='left:"+r+";top:"+n+"' top='"+(-Math.cos(i*Math.PI/180)*o).toFixed(8)+"' left='"+f+"'></div>";s.append(u),s.append(k),s.append(b),s.append(I)}}var h=0,d=15;$(document).keydown(function(e){switch(e.keyCode){case 37:$("#key .left").addClass("hover");break;case 38:$("#key .up").addClass("hover");break;case 39:$("#key .right").addClass("hover");break;case 40:$("#key .down").addClass("hover");break;case 90:$("#key .keyz").addClass("hover");break;case 88:$("#key .keyx").addClass("hover")}}),$(document).keyup(function(e){switch(e.keyCode){case 37:$("#key .left").removeClass("hover");break;case 38:$("#key .up").removeClass("hover");break;case 39:$("#key .right").removeClass("hover");break;case 40:$("#key .down").removeClass("hover");break;case 90:$("#key .keyz").removeClass("hover");break;case 88:$("#key .keyx").removeClass("hover")}}),setInterval(function(){$("#key .left").hasClass("hover")&&e(),$("#key .up").hasClass("hover")&&t(),$("#key .right").hasClass("hover")&&a(),$("#key .down").hasClass("hover")&&s(),r();var o=$("#player1"),n=$("#enemy .brick");$("#enemy-bullet >div").each(function(){c($(this),o)}),$("#My-bullet >div").each(function(){c($(this),n)})},100),setInterval(function(){h+=25;var e=$("#key .keyz"),t=$("#enemy .brick"),a=$("#enemy-bullet");p(e,h,t,a,15)},100),$(document).keypress(function(){$("#keydown").text($("#player1").css("top")),$("#keyup").text($("#player1").css("left"))}),$(document).keyup(function(){})});